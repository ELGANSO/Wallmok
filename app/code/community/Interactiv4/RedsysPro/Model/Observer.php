<?php
eval(base64_decode("LyoqDQogKiBNYWdlbnRvDQogKg0KICogTk9USUNFIE9GIExJQ0VOU0UNCiAqDQogKiBUaGlzIHNvdXJjZSBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIE9wZW4gU29mdHdhcmUgTGljZW5zZSAoT1NMIDMuMCkNCiAqIHRoYXQgaXMgYnVuZGxlZCB3aXRoIHRoaXMgcGFja2FnZSBpbiB0aGUgZmlsZSBMSUNFTlNFLnR4dC4NCiAqIEl0IGlzIGFsc28gYXZhaWxhYmxlIHRocm91Z2ggdGhlIHdvcmxkLXdpZGUtd2ViIGF0IHRoaXMgVVJMOg0KICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL29zbC0zLjAucGhwDQogKiBJZiB5b3UgZGlkIG5vdCByZWNlaXZlIGEgY29weSBvZiB0aGUgbGljZW5zZSBhbmQgYXJlIHVuYWJsZSB0bw0KICogb2J0YWluIGl0IHRocm91Z2ggdGhlIHdvcmxkLXdpZGUtd2ViLCBwbGVhc2Ugc2VuZCBhbiBlbWFpbA0KICogdG8gbGljZW5zZUBtYWdlbnRvY29tbWVyY2UuY29tIHNvIHdlIGNhbiBzZW5kIHlvdSBhIGNvcHkgaW1tZWRpYXRlbHkuDQogKg0KICogRElTQ0xBSU1FUg0KICoNCiAqIERvIG5vdCBlZGl0IG9yIGFkZCB0byB0aGlzIGZpbGUgaWYgeW91IHdpc2ggdG8gdXBncmFkZSBNYWdlbnRvIHRvIG5ld2VyDQogKiB2ZXJzaW9ucyBpbiB0aGUgZnV0dXJlLiBJZiB5b3Ugd2lzaCB0byBjdXN0b21pemUgTWFnZW50byBmb3IgeW91cg0KICogbmVlZHMgcGxlYXNlIHJlZmVyIHRvIGh0dHA6Ly93d3cubWFnZW50b2NvbW1lcmNlLmNvbSBmb3IgbW9yZSBpbmZvcm1hdGlvbi4NCiAqDQogKiBAY2F0ZWdvcnkgICAgTWFnZQ0KICogQHBhY2thZ2UgICAgIE1hZ2VfQ2hlY2tvdXQNCiAqIEBjb3B5cmlnaHQgICBDb3B5cmlnaHQgKGMpIDIwMTMgTWFnZW50byBJbmMuIChodHRwOi8vd3d3Lm1hZ2VudG9jb21tZXJjZS5jb20pDQogKiBAbGljZW5zZSAgICAgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL29zbC0zLjAucGhwICBPcGVuIFNvZnR3YXJlIExpY2Vuc2UgKE9TTCAzLjApDQogKi8NCg0KLyoqDQogKiBSZWRzeXMgUHJvIG9ic2VydmVyIG1vZGVsDQogKg0KICogQGNhdGVnb3J5IMKgIMKgSW50ZXJhY3RpdjQNCiAqIEBwYWNrYWdlIMKgIMKgIEludGVyYWN0aXY0X1JlZHN5c1Bybw0KICogQGNvcHlyaWdodCDCoCBDb3B5cmlnaHQgKGMpIDIwMTUgSW50ZXJhY3RpdjQgU0wuIChodHRwOi8vd3d3LmludGVyYWN0aXY0LmNvbSkNCiAqIEBhdXRob3IgICAgICBPc2NhciBTYWx1ZcOxYSBNYXJ0w61uIDxvc2Nhci5zYWx1ZW5hQGludGVyYWN0aXY0LmNvbT4gQG9zYWx1ZW5hDQogKiBAYXV0aG9yICAgICAgRGF2aWQgU2xhdGVyDQogKi8NCmNsYXNzIEludGVyYWN0aXY0X1JlZHN5c1Byb19Nb2RlbF9PYnNlcnZlcg0Kew0KICAgIENPTlNUIFJFRElSRUNUX1JFRFNZU19NT0RVTEUgICAgICAgID0gImk0cmVkc3lzcHJvIjsNCiAgICBDT05TVCBSRURJUkVDVF9SRURTWVNfQ09OVFJPTExFUiAgICA9ICJwYXltZW50IjsNCiAgICBDT05TVCBSRURJUkVDVF9SRURTWVNfQUNUSU9OICAgICAgICA9ICJyZWRpcmVjdCI7DQoNCiAgICBDT05TVCBTRU5ERVJfRU1BSUwgICAgICAgICAgICAgICAgICA9ICJpbmZvQGludGVyYWN0aXY0LmNvbSI7DQogICAgQ09OU1QgU0VOREVSX05BTUUgICAgICAgICAgICAgICAgICAgPSAiUmVkc3lzIFBybyBTdXBwb3J0IEluZm8iOw0KICAgIENPTlNUIERFU1RfRU1BSUwgICAgICAgICAgICAgICAgICAgID0gInNvcG9ydGVleHRlbnNpb25idWZmZXRAaW50ZXJhY3RpdjQuY29tIjsNCiAgICBDT05TVCBERVNUX05BTUUgICAgICAgICAgICAgICAgICAgICA9ICJFeHRlbnNpb24gQnVmZmV0IFN1cHBvcnQiOw0KICAgIENPTlNUIEVNQUlMX1NVQkpFQ1QgICAgICAgICAgICAgICAgID0gIk9yZGVyICMgJiBEb21haW5zIEluZm8iOw0KDQogICAgQ09OU1QgUEFZTUVOVF9TRUNUSU9OICAgICAgICAgICAgICAgPSAicGF5bWVudCI7DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gdW5zZXRJNFJlZHN5c0Nvb2tpZShWYXJpZW5fRXZlbnRfT2JzZXJ2ZXIgJG9ic2VydmVyKSB7DQoNCiAgICAgICAgJGN1cnJlbnRNb2R1bGUgICAgICA9IE1hZ2U6OmFwcCgpLT5nZXRSZXF1ZXN0KCktPmdldE1vZHVsZU5hbWUoKTsNCiAgICAgICAgJGN1cnJlbnRDb250cm9sbGVyICA9IE1hZ2U6OmFwcCgpLT5nZXRSZXF1ZXN0KCktPmdldENvbnRyb2xsZXJOYW1lKCk7DQogICAgICAgICRjdXJyZW50QWN0aW9uICAgICAgPSBNYWdlOjphcHAoKS0+Z2V0UmVxdWVzdCgpLT5nZXRBY3Rpb25OYW1lKCk7DQoNCiAgICAgICAgaWYgKCRjdXJyZW50TW9kdWxlID09IHNlbGY6OlJFRElSRUNUX1JFRFNZU19NT0RVTEUgJiYgJGN1cnJlbnRDb250cm9sbGVyID09IHNlbGY6OlJFRElSRUNUX1JFRFNZU19DT05UUk9MTEVSICYmICRjdXJyZW50QWN0aW9uID09IHNlbGY6OlJFRElSRUNUX1JFRFNZU19BQ1RJT04pIHsNCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfQ0KDQogICAgICAgICRjb29raWVNb2RlbCA9IE1hZ2U6OmFwcCgpLT5nZXRDb29raWUoKTsNCiAgICAgICAgJHJlZHN5c0Nvb2tpZSA9ICRjb29raWVNb2RlbC0+Z2V0KCdpNHJlZHN5c3BybycpOw0KDQogICAgICAgIGlmICgkcmVkc3lzQ29va2llICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgJGNvb2tpZU1vZGVsLT5kZWxldGUoJ2k0cmVkc3lzcHJvJyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gYXNkZmdocXdlcnR5KFZhcmllbl9FdmVudF9PYnNlcnZlciAkb2JzZXJ2ZXIpIHsNCg0KICAgICAgICAkY29udHJvbGxlckFjdGlvbiA9ICRvYnNlcnZlci0+Z2V0Q29udHJvbGxlckFjdGlvbigpOw0KDQogICAgICAgICRjb25maWdTeXN0ZW1TZWN0aW9uID0gJGNvbnRyb2xsZXJBY3Rpb24tPmdldFJlcXVlc3QoKS0+Z2V0UGFyYW0oJ3NlY3Rpb24nKTsNCg0KICAgICAgICBpZiAoaXNzZXQoJGNvbmZpZ1N5c3RlbVNlY3Rpb24pICYmICRjb25maWdTeXN0ZW1TZWN0aW9uID09PSBzZWxmOjpQQVlNRU5UX1NFQ1RJT04pIHsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIlJFU1VNRU4gREFUT1MgUEFSQSBTT1BPUlRFIEVYVEVOU0lPTiBCVUZGRVQ6ICI7DQoNCg0KICAgICAgICAgICAgLy8gc2VydmVyJ3MgaXAgYWRkcmVzcyAod2hlcmUgdGhlIGN1cnJlbnQgc2NyaXB0IGlzKQ0KICAgICAgICAgICAgLy8kbWVzc2FnZSAuPSAiPGJyPiI7DQogICAgICAgICAgICAvLyRzZXJ2ZXJBZGRyID0gTWFnZTo6aGVscGVyKCdjb3JlL2h0dHAnKS0+Z2V0U2VydmVyQWRkcih0cnVlKTsNCiAgICAgICAgICAgIC8vJG1lc3NhZ2UgLj0gIklQIFNFUlZJRE9SOiAnIiAuICRzZXJ2ZXJBZGRyIC4gIicuIjsNCg0KICAgICAgICAgICAgJG1lc3NhZ2UgLj0gIjxicj4iOw0KICAgICAgICAgICAgJG1lc3NhZ2UgLj0gIjxicj4iOw0KDQogICAgICAgICAgICBmb3JlYWNoIChNYWdlOjphcHAoKS0+Z2V0U3RvcmVzKCkgYXMgJGlkID0+ICRzdG9yZSkgew0KICAgICAgICAgICAgICAgICRtZXNzYWdlIC49ICR0aGlzLT5fZ2V0TWVzc2FnZUJ5U3RvcmVWaWV3KCRpZCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR0aGlzLT5fc2VuZFN1cHBvcnRNYWlsKCRtZXNzYWdlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkdGhpczsNCg0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBfZ2V0TWVzc2FnZUJ5U3RvcmVWaWV3KCRzdG9yZSkgew0KDQogICAgICAgICRtZXNzYWdlQnlTdG9yZVZpZXcgPSAiIjsNCiAgICAgICAgJHN0b3JlID0gTWFnZTo6Z2V0TW9kZWwoJ2NvcmUvc3RvcmUnKS0+bG9hZCgkc3RvcmUpOw0KICAgICAgICAkc3RvcmVJZCA9ICRzdG9yZS0+Z2V0SWQoKTsNCg0KICAgICAgICAkaXNBY3RpdmUgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygicGF5bWVudC9pNHJlZHN5c3Byby9hY3RpdmUiLCAkc3RvcmVJZCk7DQoNCiAgICAgICAgJG1lc3NhZ2VCeVN0b3JlVmlldyAuPSAiSU5GTyBkZWwgU3RvcmUgVmlldyAnIiAuICRzdG9yZUlkIC4gIicgY29uIG5vbWJyZSAnIiAuICRzdG9yZS0+Z2V0TmFtZSgpIC4gICInIDo8YnI+IjsNCiAgICAgICAgJG1lc3NhZ2VCeVN0b3JlVmlldyAuPSAiRlJPTlRFTkQgTkFNRTogJyIgLiAkc3RvcmUtPmdldEZyb250ZW5kTmFtZSgpIC4gIicuPGJyPiI7DQoNCiAgICAgICAgaWYgKCRpc0FjdGl2ZSkgew0KDQogICAgICAgICAgICAkZXh0ZW5zaW9uQnVmZmV0T3JkZXJOdW1iZXIgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygicGF5bWVudC9pNHJlZHN5c3Byby9lYm9yZGVybnVtYmVyIiwgJHN0b3JlSWQpOw0KICAgICAgICAgICAgJG1lc3NhZ2VCeVN0b3JlVmlldyAuPSAiRXh0ZW5zaW9uIEJ1ZmZldCBPcmRlciAjOiAiIC4gJGV4dGVuc2lvbkJ1ZmZldE9yZGVyTnVtYmVyIC4gIjxicj4iOw0KDQogICAgICAgICAgICAkc3RvcmVWaWV3RG9tYWluID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoIndlYi91bnNlY3VyZS9iYXNlX3VybCIsICRzdG9yZUlkKTsNCiAgICAgICAgICAgICRtZXNzYWdlQnlTdG9yZVZpZXcgLj0gIkRvbWluaW8gU3RvcmUgVmlldzogIiAuICRzdG9yZVZpZXdEb21haW4gLiAiPGJyPiI7DQogICAgICAgICAgICAkbWVzc2FnZUJ5U3RvcmVWaWV3IC49ICI8YnI+IjsNCiAgICAgICAgICAgICRtZXNzYWdlQnlTdG9yZVZpZXcgLj0gIjxicj4iOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgJG1lc3NhZ2VCeVN0b3JlVmlldyAuPSAiRXh0ZW5zacOzbiBSZWRzeXMgUHJvIG5vIGFjdGl2YSBlbiBlc3RhIFZpc3RhIGRlIFRpZW5kYS4iOw0KICAgICAgICAgICAgJG1lc3NhZ2VCeVN0b3JlVmlldyAuPSAiPGJyPiI7DQogICAgICAgICAgICAkbWVzc2FnZUJ5U3RvcmVWaWV3IC49ICI8YnI+IjsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgcmV0dXJuICRtZXNzYWdlQnlTdG9yZVZpZXc7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF9zZW5kU3VwcG9ydE1haWwoJG1lc3NhZ2UpIHsNCg0KICAgICAgICAkYm9keSA9ICRtZXNzYWdlOw0KDQogICAgICAgIHRyeXsNCiAgICAgICAgICAgICRtYWlsID0gbmV3IFplbmRfTWFpbCgpOw0KICAgICAgICAgICAgJG1haWwtPnNldEZyb20oc2VsZjo6U0VOREVSX0VNQUlMLCBzZWxmOjpTRU5ERVJfTkFNRSk7DQogICAgICAgICAgICAkbWFpbC0+YWRkVG8oc2VsZjo6REVTVF9FTUFJTCwgc2VsZjo6REVTVF9OQU1FKTsNCiAgICAgICAgICAgICRtYWlsLT5zZXRTdWJqZWN0KHNlbGY6OkVNQUlMX1NVQkpFQ1QpOw0KICAgICAgICAgICAgJG1haWwtPnNldEJvZHlIdG1sKCRib2R5KTsNCg0KICAgICAgICAgICAgJG1haWwtPnNlbmQoKTsNCg0KICAgICAgICB9Y2F0Y2goRXhjZXB0aW9uICRlKSB7DQogICAgICAgICAgICBNYWdlOjpsb2dFeGNlcHRpb24oJGUpOw0KICAgICAgICAgICAgTWFnZTo6aGVscGVyKCdpNHJlZHN5c3BybycpLT5sb2coJGUtPmdldE1lc3NhZ2UoKSk7DQogICAgICAgIH0NCiAgICB9DQp9"));